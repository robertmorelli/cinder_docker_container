# Transform Examples

Generated by `tests/generate_pass_examples_readme.py`.

Each transform is shown as:
- input (`*.from.py`)
- expected output (`*.to.py`)
- optional function-level plan (`*.plan.txt`)

## Cases

- [body_box_primitive](#body-box-primitive)
- [body_cast_all](#body-cast-all)
- [body_construct_container](#body-construct-container)
- [inline_cleanup](#inline-cleanup)
- [param_box_primitive](#param-box-primitive)
- [param_cast_all](#param-cast-all)
- [param_construct_container](#param-construct-container)
- [return_box_primitive](#return-box-primitive)
- [return_cast_all](#return-cast-all)
- [return_construct_container](#return-construct-container)
- [wrapper_cleanup](#wrapper-cleanup)

## body_box_primitive

Input (`body_box_primitive.from.py`):
```python
from __static__ import int64


def bump() -> int64:
    n: int64 = 41
    return n + 1
```

Expected Output (`body_box_primitive.to.py`):
```python
from __static__ import int64, box


def bump() -> int64:
    n = box(int64(41))
    return int64(n) + 1
```

## body_cast_all

Input (`body_cast_all.from.py`):
```python
from __static__ import cast


class Widget:
    def tick(self) -> None:
        return None


def make_widget() -> Widget:
    return Widget()


def run() -> None:
    w: Widget = make_widget()
    w.tick()
```

Expected Output (`body_cast_all.to.py`):
```python
from __static__ import cast


class Widget:
    def tick(self) -> None:
        return None


def make_widget() -> Widget:
    return Widget()


def run() -> None:
    w = cast(Widget, make_widget())
    cast(Widget, w).tick()
```

## body_construct_container

Input (`body_construct_container.from.py`):
```python
from __static__ import int64, CheckedList


def first_value() -> int64:
    xs: CheckedList[int64] = CheckedList[int64]([1, 2, 3])
    return xs[0]
```

Expected Output (`body_construct_container.to.py`):
```python
from __static__ import int64, CheckedList


def first_value() -> int64:
    xs = CheckedList[int64](CheckedList[int64]([1, 2, 3]))
    return CheckedList[int64](xs)[0]
```

## inline_cleanup

Input (`inline_cleanup.from.py`):
```python
from __static__ import inline, int64


@inline
def project(_x):
    x: int64 = int64(_x)
    return x
```

Expected Output (`inline_cleanup.to.py`):
```python
from __static__ import inline, int64


@inline
def project(_x):
    return int64(_x)
```

## param_box_primitive

Plan (`param_box_primitive.plan.txt`):
```text
# Detype only add_one for this example.
add_one
```

Input (`param_box_primitive.from.py`):
```python
from __static__ import int64


def add_one(x: int64) -> int64:
    return x + 1


def use(v: int64) -> int64:
    out: int64 = add_one(v)
    return out
```

Expected Output (`param_box_primitive.to.py`):
```python
from __static__ import int64, box


def add_one(_x) -> int64:
    x: int64 = int64(_x)
    return x + 1


def use(v: int64) -> int64:
    out: int64 = add_one(box(v))
    return out
```

## param_cast_all

Input (`param_cast_all.from.py`):
```python
from __static__ import cast


class Foo:
    pass


def echo(foo: Foo) -> Foo:
    return foo


def use(x: Foo) -> Foo:
    out: Foo = echo(x)
    return out
```

Expected Output (`param_cast_all.to.py`):
```python
from __static__ import cast


class Foo:
    pass


def echo(_foo) -> Foo:
    foo: Foo = cast(Foo, _foo)
    return foo


def use(_x) -> Foo:
    x: Foo = cast(Foo, _x)
    out: Foo = echo(cast(Foo, x))
    return out
```

## param_construct_container

Input (`param_construct_container.from.py`):
```python
from __static__ import int64, CheckedList


def first(xs: CheckedList[int64]) -> int64:
    return xs[0]


def use(src: CheckedList[int64]) -> int64:
    out: int64 = first(src)
    return out
```

Expected Output (`param_construct_container.to.py`):
```python
from __static__ import int64, CheckedList


def first(_xs) -> int64:
    xs: CheckedList[int64] = CheckedList[int64](_xs)
    return xs[0]


def use(_src) -> int64:
    src: CheckedList[int64] = CheckedList[int64](_src)
    out: int64 = first(CheckedList[int64](src))
    return out
```

## return_box_primitive

Input (`return_box_primitive.from.py`):
```python
from __static__ import int64


def inc(x: int64) -> int64:
    return x + 1


def use(v: int64) -> int64:
    out: int64 = inc(v)
    return out
```

Expected Output (`return_box_primitive.to.py`):
```python
from __static__ import int64, box


def inc(x: int64):
    return box(int64(x + 1))


def use(v: int64):
    out: int64 = int64(inc(v))
    return box(int64(out))
```

## return_cast_all

Input (`return_cast_all.from.py`):
```python
from __static__ import cast


class Foo:
    pass


def make_foo() -> Foo:
    return Foo()


def use() -> Foo:
    out: Foo = make_foo()
    return out
```

Expected Output (`return_cast_all.to.py`):
```python
from __static__ import cast


class Foo:
    pass


def make_foo():
    return Foo()


def use():
    out: Foo = cast(Foo, make_foo())
    return out
```

## return_construct_container

Input (`return_construct_container.from.py`):
```python
from __static__ import int64, CheckedList


def make_items() -> CheckedList[int64]:
    return CheckedList[int64]([1, 2, 3])


def use() -> int64:
    out: CheckedList[int64] = make_items()
    return out[0]
```

Expected Output (`return_construct_container.to.py`):
```python
from __static__ import int64, CheckedList


def make_items():
    return CheckedList[int64]([1, 2, 3])


def use() -> int64:
    out: CheckedList[int64] = CheckedList[int64](make_items())
    return out[0]
```

## wrapper_cleanup

Input (`wrapper_cleanup.from.py`):
```python
from __static__ import cast, int64, box


class Foo:
    pass


def demo(x):
    a = cast(Foo, cast(Foo, x))
    b = int64(int64(1))
    c = box(box(int64(2)))
    return a, b, c
```

Expected Output (`wrapper_cleanup.to.py`):
```python
from __static__ import cast, int64, box


class Foo:
    pass


def demo(x):
    a = cast(Foo, x)
    b = int64(1)
    c = box(int64(2))
    return a, b, c
```
