# Transform Examples

Generated by `tests/generate_pass_examples_readme.py`.

Each transform is shown side-by-side:
- left: input
- right: expected output
- display omits `from __static__ import ...` lines
- optional function-level plan (`*.plan.txt`)

## Cases

- [body_box_primitive](#body-box-primitive)
- [body_cast_all](#body-cast-all)
- [body_construct_container](#body-construct-container)
- [inline_cleanup](#inline-cleanup)
- [param_box_primitive](#param-box-primitive)
- [param_cast_all](#param-cast-all)
- [param_construct_container](#param-construct-container)
- [return_box_primitive](#return-box-primitive)
- [return_cast_all](#return-cast-all)
- [return_construct_container](#return-construct-container)
- [wrapper_cleanup](#wrapper-cleanup)

## body_box_primitive

Plan:
```text
bump
```

<table>
<tr><th>From</th><th>To</th></tr>
<tr>
<td><pre><code class="language-python">def bump() -&gt; int64:
    n: int64 = 41
    return n + 1</code></pre></td>
<td><pre><code class="language-python">def bump() -&gt; int64:
    n = box(int64(41))
    return int64(n) + 1</code></pre></td>
</tr>
</table>

## body_cast_all

Plan:
```text
run
```

<table>
<tr><th>From</th><th>To</th></tr>
<tr>
<td><pre><code class="language-python">class Widget:
    def tick(self) -&gt; None:
        return None


def make_widget() -&gt; Widget:
    return Widget()


def run() -&gt; None:
    w: Widget = make_widget()
    w.tick()</code></pre></td>
<td><pre><code class="language-python">class Widget:
    def tick(self) -&gt; None:
        return None


def make_widget() -&gt; Widget:
    return Widget()


def run() -&gt; None:
    w = cast(Widget, make_widget())
    cast(Widget, w).tick()</code></pre></td>
</tr>
</table>

## body_construct_container

Plan:
```text
first_value
```

<table>
<tr><th>From</th><th>To</th></tr>
<tr>
<td><pre><code class="language-python">def first_value() -&gt; int64:
    xs: CheckedList[int64] = CheckedList[int64]([1, 2, 3])
    return xs[0]</code></pre></td>
<td><pre><code class="language-python">def first_value() -&gt; int64:
    xs = CheckedList[int64](CheckedList[int64]([1, 2, 3]))
    return CheckedList[int64](xs)[0]</code></pre></td>
</tr>
</table>

## inline_cleanup

Plan:
```text
project
```

<table>
<tr><th>From</th><th>To</th></tr>
<tr>
<td><pre><code class="language-python">@inline
def project(_x):
    x: int64 = int64(_x)
    return x</code></pre></td>
<td><pre><code class="language-python">@inline
def project(_x):
    return int64(_x)</code></pre></td>
</tr>
</table>

## param_box_primitive

Plan:
```text
# Detype only add_one for this example.
add_one
```

<table>
<tr><th>From</th><th>To</th></tr>
<tr>
<td><pre><code class="language-python">def add_one(x: int64) -&gt; int64:
    return x + 1


def use(v: int64) -&gt; int64:
    out: int64 = add_one(v)
    return out</code></pre></td>
<td><pre><code class="language-python">def add_one(_x) -&gt; int64:
    x: int64 = int64(_x)
    return x + 1


def use(v: int64) -&gt; int64:
    out: int64 = add_one(box(v))
    return out</code></pre></td>
</tr>
</table>

## param_cast_all

Plan:
```text
echo
```

<table>
<tr><th>From</th><th>To</th></tr>
<tr>
<td><pre><code class="language-python">class Foo:
    pass


def echo(foo: Foo) -&gt; Foo:
    return foo


def use(x: Foo) -&gt; Foo:
    out: Foo = echo(x)
    return out</code></pre></td>
<td><pre><code class="language-python">class Foo:
    pass


def echo(_foo) -&gt; Foo:
    foo: Foo = cast(Foo, _foo)
    return foo


def use(x: Foo) -&gt; Foo:
    out: Foo = echo(cast(Foo, x))
    return out</code></pre></td>
</tr>
</table>

## param_construct_container

Plan:
```text
first
```

<table>
<tr><th>From</th><th>To</th></tr>
<tr>
<td><pre><code class="language-python">def first(xs: CheckedList[int64]) -&gt; int64:
    return xs[0]


def use(src: CheckedList[int64]) -&gt; int64:
    out: int64 = first(src)
    return out</code></pre></td>
<td><pre><code class="language-python">def first(_xs) -&gt; int64:
    xs: CheckedList[int64] = CheckedList[int64](_xs)
    return xs[0]


def use(src: CheckedList[int64]) -&gt; int64:
    out: int64 = first(CheckedList[int64](src))
    return out</code></pre></td>
</tr>
</table>

## return_box_primitive

Plan:
```text
inc
```

<table>
<tr><th>From</th><th>To</th></tr>
<tr>
<td><pre><code class="language-python">def inc(x: int64) -&gt; int64:
    return x + 1


def use(v: int64) -&gt; int64:
    out: int64 = inc(v)
    return out</code></pre></td>
<td><pre><code class="language-python">def inc(x: int64):
    return box(int64(x + 1))


def use(v: int64) -&gt; int64:
    out: int64 = int64(inc(v))
    return out</code></pre></td>
</tr>
</table>

## return_cast_all

Plan:
```text
make_foo
```

<table>
<tr><th>From</th><th>To</th></tr>
<tr>
<td><pre><code class="language-python">class Foo:
    pass


def make_foo() -&gt; Foo:
    return Foo()


def use() -&gt; Foo:
    out: Foo = make_foo()
    return out</code></pre></td>
<td><pre><code class="language-python">class Foo:
    pass


def make_foo():
    return Foo()


def use() -&gt; Foo:
    out: Foo = cast(Foo, make_foo())
    return out</code></pre></td>
</tr>
</table>

## return_construct_container

Plan:
```text
make_items
```

<table>
<tr><th>From</th><th>To</th></tr>
<tr>
<td><pre><code class="language-python">def make_items() -&gt; CheckedList[int64]:
    return CheckedList[int64]([1, 2, 3])


def use() -&gt; int64:
    out: CheckedList[int64] = make_items()
    return out[0]</code></pre></td>
<td><pre><code class="language-python">def make_items():
    return CheckedList[int64]([1, 2, 3])


def use() -&gt; int64:
    out: CheckedList[int64] = CheckedList[int64](make_items())
    return out[0]</code></pre></td>
</tr>
</table>

## wrapper_cleanup

Plan:
```text
demo
```

<table>
<tr><th>From</th><th>To</th></tr>
<tr>
<td><pre><code class="language-python">class Foo:
    pass


def demo(x):
    a = cast(Foo, cast(Foo, x))
    b = int64(int64(1))
    c = box(box(int64(2)))
    return a, b, c</code></pre></td>
<td><pre><code class="language-python">class Foo:
    pass


def demo(x):
    a = cast(Foo, x)
    b = int64(1)
    c = box(int64(2))
    return a, b, c</code></pre></td>
</tr>
</table>
