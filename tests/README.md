# Transform Examples

Generated by `tests/generate_pass_examples_readme.py`.

Each transform is shown vertically:
- input
- expected output
- display omits `from __static__ import ...` lines

## Cases

- [body box primitive](#body-box-primitive)
- [body cast all](#body-cast-all)
- [body cast container passthrough](#body-cast-container-passthrough)
- [body construct container](#body-construct-container)
- [inline cleanup](#inline-cleanup)
- [param box primitive](#param-box-primitive)
- [param cast all](#param-cast-all)
- [param cast container passthrough](#param-cast-container-passthrough)
- [param construct container](#param-construct-container)
- [return box primitive](#return-box-primitive)
- [return cast all](#return-cast-all)
- [return cast container passthrough](#return-cast-container-passthrough)
- [return construct container](#return-construct-container)
- [wrapper cleanup](#wrapper-cleanup)

## body box primitive

From:
```python
def bump() -> int64:
    n: int64 = 41
    return n + 1
```

To:
```python
def bump() -> int64:
    n = box(int64(41))
    return int64(n) + 1
```

## body cast all

From:
```python
class Widget:
    def tick(self) -> None:
        return None


def make_widget() -> Widget:
    return Widget()


def run() -> None:
    w: Widget = make_widget()
    w.tick()
```

To:
```python
class Widget:
    def tick(self) -> None:
        return None


def make_widget() -> Widget:
    return Widget()


def run() -> None:
    w = cast(Widget, make_widget())
    cast(Widget, w).tick()
```

## body cast container passthrough

From:
```python
def first_value(xs: Array[int64]) -> int64:
    arr: Array[int64] = xs
    return arr[int64(0)]
```

To:
```python
def first_value(xs: Array[int64]) -> int64:
    arr = cast(Array[int64], xs)
    return cast(Array[int64], arr)[int64(0)]
```

## body construct container

From:
```python
def first_value() -> int64:
    xs: CheckedList[int64] = CheckedList[int64]([1, 2, 3])
    return xs[0]
```

To:
```python
def first_value() -> int64:
    xs = CheckedList[int64](CheckedList[int64]([1, 2, 3]))
    return CheckedList[int64](xs)[0]
```

## inline cleanup

From:
```python
@inline
def project(_x):
    x: int64 = int64(_x)
    return x
```

To:
```python
@inline
def project(_x):
    return int64(_x)
```

## param box primitive

From:
```python
def add_one(x: int64) -> int64:
    return x + 1


def use(v: int64) -> int64:
    out: int64 = add_one(v)
    return out
```

To:
```python
def add_one(_x) -> int64:
    x: int64 = int64(_x)
    return x + 1


def use(v: int64) -> int64:
    out: int64 = add_one(box(v))
    return out
```

## param cast all

From:
```python
class Foo:
    pass


def echo(foo: Foo) -> Foo:
    return foo


def use(x: Foo) -> Foo:
    out: Foo = echo(x)
    return out
```

To:
```python
class Foo:
    pass


def echo(_foo) -> Foo:
    foo: Foo = cast(Foo, _foo)
    return foo


def use(x: Foo) -> Foo:
    out: Foo = echo(cast(Foo, x))
    return out
```

## param cast container passthrough

From:
```python
def first(xs: Array[int64]) -> int64:
    return xs[int64(0)]


def use(src: Array[int64]) -> int64:
    out: int64 = first(src)
    return out
```

To:
```python
def first(_xs) -> int64:
    xs: Array[int64] = cast(Array[int64], _xs)
    return xs[int64(0)]


def use(src: Array[int64]) -> int64:
    out: int64 = first(cast(Array[int64], src))
    return out
```

## param construct container

From:
```python
def first(xs: CheckedList[int64]) -> int64:
    return xs[0]


def use(src: CheckedList[int64]) -> int64:
    out: int64 = first(src)
    return out
```

To:
```python
def first(_xs) -> int64:
    xs: CheckedList[int64] = CheckedList[int64](_xs)
    return xs[0]


def use(src: CheckedList[int64]) -> int64:
    out: int64 = first(CheckedList[int64](src))
    return out
```

## return box primitive

From:
```python
def inc(x: int64) -> int64:
    return x + 1


def use(v: int64) -> int64:
    out: int64 = inc(v)
    return out
```

To:
```python
def inc(x: int64):
    return box(int64(x + 1))


def use(v: int64) -> int64:
    out: int64 = int64(inc(v))
    return out
```

## return cast all

From:
```python
class Foo:
    pass


def make_foo() -> Foo:
    return Foo()


def use() -> Foo:
    out: Foo = make_foo()
    return out
```

To:
```python
class Foo:
    pass


def make_foo():
    return Foo()


def use() -> Foo:
    out: Foo = cast(Foo, make_foo())
    return out
```

## return cast container passthrough

From:
```python
def make_items(xs: Array[int64]) -> Array[int64]:
    return xs


def use(v: Array[int64]) -> int64:
    out: Array[int64] = make_items(v)
    return out[int64(0)]
```

To:
```python
def make_items(xs: Array[int64]):
    return xs


def use(v: Array[int64]) -> int64:
    out: Array[int64] = cast(Array[int64], make_items(v))
    return out[int64(0)]
```

## return construct container

From:
```python
def make_items() -> CheckedList[int64]:
    return CheckedList[int64]([1, 2, 3])


def use() -> int64:
    out: CheckedList[int64] = make_items()
    return out[0]
```

To:
```python
def make_items():
    return CheckedList[int64]([1, 2, 3])


def use() -> int64:
    out: CheckedList[int64] = CheckedList[int64](make_items())
    return out[0]
```

## wrapper cleanup

From:
```python
class Foo:
    pass


def demo(x):
    a = cast(Foo, cast(Foo, x))
    b = int64(int64(1))
    c = box(box(int64(2)))
    return a, b, c
```

To:
```python
class Foo:
    pass


def demo(x):
    a = cast(Foo, x)
    b = int64(1)
    c = box(int64(2))
    return a, b, c
```
